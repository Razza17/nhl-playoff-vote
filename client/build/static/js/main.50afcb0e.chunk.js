(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{102:function(e,t,a){e.exports=a(187)},113:function(e,t,a){},187:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(26),l=a.n(o),s=a(72),c=a(15),i=(a(113),a(12)),u=a(13),m=a(17),d=a(14),p=a(16),h=a(196),f=a(188),E=a(189),v=a(57),b=a(23),g=a.n(b),O="GET_ERRORS",y="SET_CURRENT_USER",j=function(e){e?g.a.defaults.headers.common.Authorization=e:delete g.a.defaults.headers.common.Authorization},C=a(66),w=a.n(C),k=function(e,t){return function(a){g.a.put("/user/"+e,t).catch(function(e){a({type:O,payload:e})})}},S=function(e,t){return function(a){g.a.post("/login",e).then(function(e){var n=e.data.token;localStorage.setItem("jwtToken",n),j(n);var r=w()(n);a(I(r)),localStorage.setItem("userID",r.id),localStorage.setItem("userPseudo",r.pseudo),t.push("/vote")}).catch(function(e){a({type:O,payload:e})})}},T=function(e){return function(t){g.a.post("/login",e).then(function(e){var a=localStorage.getItem("jwtToken");j(a);var n=w()(a);t(I(n))}).catch(function(e){t({type:O,payload:e})})}},I=function(e){return{type:y,payload:e}},N=function(){return function(e){localStorage.removeItem("jwtToken"),localStorage.removeItem("userID"),localStorage.removeItem("userPseudo"),j(!1),e(I({})),window.location.assign("/")}},V=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={isAuthenticated:!1},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){return e.auth.isAuthenticated!==this.state.isAuthenticated&&(this.setState({isAuthenticated:!0}),!0)}},{key:"onLogout",value:function(){this.props.logoutUser()}},{key:"render",value:function(){var e=r.a.createElement(h.a.Collapse,null,r.a.createElement(f.a,null,r.a.createElement(v.LinkContainer,{to:"/vote"},r.a.createElement(E.a,{eventKey:0},"Vote !")),r.a.createElement(v.LinkContainer,{to:"/classement"},r.a.createElement(E.a,{eventKey:1},"Classement"))),r.a.createElement(f.a,{pullRight:!0},r.a.createElement(v.LinkContainer,{to:"/monCompte"},r.a.createElement(E.a,{eventKey:2},"Mon Compte")),r.a.createElement(E.a,{eventKey:3,onClick:this.onLogout.bind(this)},"Me d\xe9connecter")));return r.a.createElement(h.a,{collapseOnSelect:!0},r.a.createElement(h.a.Header,null,r.a.createElement(h.a.Brand,null,r.a.createElement("div",{className:"navbar-brand"},"NHL vote app")),r.a.createElement(h.a.Toggle,{id:"collapseButton"})),this.state.isAuthenticated?e:null)}}]),t}(n.Component),_=Object(c.b)(function(e){return{auth:e.auth}},{logoutUser:N})(V),D=a(90),U=a(50),x=a(38),P=a(22),R=a(44),A=a(96),M=a(190),L=a(199),B=a(195),G=a(191),H=a(197),J=a(192),q=a(4),K=a.n(q),W=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(m.a)(this,Object(d.a)(t).call(this))).state={nom:"",prenom:"",pseudo:"",email:"",password:"",password_confirm:"",errors:{}},e.handleInputChange=e.handleInputChange.bind(Object(P.a)(Object(P.a)(e))),e.handleSubmit=e.handleSubmit.bind(Object(P.a)(Object(P.a)(e))),e}return Object(p.a)(t,e),Object(u.a)(t,[{key:"handleInputChange",value:function(e){this.setState(Object(x.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(){var e={nom:this.state.nom,prenom:this.state.prenom,pseudo:this.state.pseudo,email:this.state.email,password:this.state.password,password_confirm:this.state.password_confirm};this.props.registerUser(e,this.props.history)}},{key:"componentWillReceiveProps",value:function(e){e.errors&&this.setState({errors:e.errors})}},{key:"render",value:function(){var e=this.state.errors;return r.a.createElement(A.a,{id:"logup",className:"vertical-middle",fluid:!0},r.a.createElement(M.a,{xs:12,md:4,mdOffset:4},r.a.createElement(L.a,{id:"logup-panel-group"},r.a.createElement(B.a,null,r.a.createElement(B.a.Heading,null,r.a.createElement(B.a.Title,{componentClass:"h2"},"Cr\xe9er ton compte")),r.a.createElement(B.a.Body,null,r.a.createElement(G.a,{controlId:"nom"},r.a.createElement(H.a,{type:"text",className:K()("form-control form-control-lg",{"is-invalid":e.nom}),placeholder:"Entre ton nom",name:"nom",onChange:this.handleInputChange,value:this.state.nom}),e.nom&&r.a.createElement("div",{className:"invalid-feedback"},e.nom)),r.a.createElement(G.a,{controlId:"prenom"},r.a.createElement(H.a,{type:"text",className:K()("form-control form-control-lg",{"is-invalid":e.prenom}),placeholder:"Entre ton pr\xe9nom",name:"prenom",onChange:this.handleInputChange,value:this.state.prenom}),e.prenom&&r.a.createElement("div",{className:"invalid-feedback"},e.prenom)),r.a.createElement(G.a,{controlId:"pseudo"},r.a.createElement(H.a,{type:"text",className:K()("form-control form-control-lg",{"is-invalid":e.pseudo}),placeholder:"Entre ton pseudo",name:"pseudo",onChange:this.handleInputChange,value:this.state.pseudo}),e.pseudo&&r.a.createElement("div",{className:"invalid-feedback"},e.pseudo)),r.a.createElement(G.a,{controlId:"email"},r.a.createElement(H.a,{type:"email",className:K()("form-control form-control-lg",{"is-invalid":e.email}),placeholder:"Entre ton email",name:"email",onChange:this.handleInputChange,value:this.state.email}),e.email&&r.a.createElement("div",{className:"invalid-feedback"},e.email)),r.a.createElement(G.a,{controlId:"password"},r.a.createElement(H.a,{type:"password",className:K()("form-control form-control-lg",{"is-invalid":e.password}),placeholder:"Entre ton mot de passe",name:"password",onChange:this.handleInputChange,value:this.state.password}),e.password&&r.a.createElement("div",{className:"invalid-feedback"},e.password)),r.a.createElement(G.a,{controlId:"password_confirm"},r.a.createElement(H.a,{type:"password",className:K()("form-control form-control-lg",{"is-invalid":e.password_confirm}),placeholder:"Confirme ton mot de passe",name:"password_confirm",onChange:this.handleInputChange,value:this.state.password_confirm}),e.password_confirm&&r.a.createElement("div",{className:"invalid-feedback"},e.password_confirm)),r.a.createElement(J.a,{onClick:this.handleSubmit},"Enregistrer"),r.a.createElement(M.a,{xs:12,className:"signup-to-signin"},r.a.createElement(R.a,{to:"/signin"},"Sinon pour te connecter c'est par ici")))))))}}]),t}(n.Component),z=Object(c.b)(function(e){return{errors:e.errors}},{registerUser:function(e,t){return function(a){g.a.post("/user",e).then(function(e){return t.push("/signin")}).catch(function(e){a({type:O,payload:e.response.data})})}}})(W),F=a(10),X=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(m.a)(this,Object(d.a)(t).call(this))).state={email:"",password:"",errors:{}},e.handleInputChange=e.handleInputChange.bind(Object(P.a)(Object(P.a)(e))),e.handleSubmit=e.handleSubmit.bind(Object(P.a)(Object(P.a)(e))),e}return Object(p.a)(t,e),Object(u.a)(t,[{key:"handleInputChange",value:function(e){this.setState(Object(x.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(){var e={email:this.state.email,password:this.state.password};this.props.loginUser(e,this.props.history)}},{key:"componentWillReceiveProps",value:function(e){e.errors&&this.setState({errors:e.errors.response.data})}},{key:"render",value:function(){var e=this.state.errors;return r.a.createElement(A.a,{id:"login",className:"vertical-middle",fluid:!0},r.a.createElement(M.a,{xs:12,md:4,mdOffset:4},r.a.createElement(L.a,{id:"signinPanel"},r.a.createElement(B.a,null,r.a.createElement(B.a.Heading,null,r.a.createElement(B.a.Title,{componentClass:"h2"},"Connecte toi")),r.a.createElement(B.a.Body,null,r.a.createElement(G.a,{controlId:"email"},r.a.createElement(H.a,{type:"email",placeholder:"Entre ton email",className:K()("form-control form-control-lg",{"is-invalid":e.email}),name:"email",onChange:this.handleInputChange,value:this.state.email}),e.email&&r.a.createElement("div",{className:"invalid-feedback"},e.email)),r.a.createElement(G.a,{controlId:"password"},r.a.createElement(H.a,{type:"password",placeholder:"Entre ton mot de passe",className:K()("form-control form-control-lg",{"is-invalid":e.password}),name:"password",onChange:this.handleInputChange,value:this.state.password}),e.password&&r.a.createElement("div",{className:"invalid-feedback"},e.password)),r.a.createElement(J.a,{onClick:this.handleSubmit},"Envoyer"))))))}}]),t}(n.Component),$=Object(c.b)(function(e){return{errors:e.errors}},function(e){return Object(F.b)({loginUser:S},e)})(X);function Q(e){return function(t){g.a.post("/vote",e).then(function(e){t({type:"POST_VOTE",payload:e.data})}).catch(function(e){t({type:"POST_VOTE_REJECTED",payload:e})})}}function Y(e){return function(t){g.a.get("/vote/"+e).then(function(e){t({type:"GET_VOTE",payload:e.data})}).catch(function(e){t({type:"GET_VOTE_REJECTED",payload:e})})}}function Z(){return function(e){g.a.get("/teams").then(function(t){e({type:"GET_TEAMS",payload:t.data})}).catch(function(t){e({type:"GET_TEAMS_REJECTED",payload:t})})}}var ee=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).props.getTeams(),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props.allTeams.map(function(t,a){return-1===e.props.teams.indexOf(t._id)||r.a.createElement(M.a,{xs:12,md:4,key:a,className:"user-vote-list-item"},r.a.createElement("img",{className:"teams-logo",src:t.img,alt:t.name})," ",t.name)});return r.a.createElement(M.a,{xs:12,md:8,mdOffset:2,className:"user-vote"},r.a.createElement(B.a,null,r.a.createElement(B.a.Heading,null,r.a.createElement(B.a.Title,{componentClass:"h2"},"Voici ton vote pour les Playoffs")),r.a.createElement(B.a.Body,{className:"user-vote-list"},t)))}}]),t}(n.Component),te=Object(c.b)(function(e){return{allTeams:e.teams.teams}},function(e){return Object(F.b)({getTeams:Z},e)})(ee),ae=a(31),ne=a(193),re=a(194),oe=a(98),le=a.n(oe),se=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).props.getTeams(),a.state={teamsSelected:[],errors:"",isValid:""},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"onTeamChange",value:function(e){var t=e.target.id,a=e.target.checked,n=Object(ae.a)(this.state.teamsSelected);if(a)n.push(t);else{var r=n.indexOf(t);-1!==r&&n.splice(r,1)}this.setState({teamsSelected:n,errors:""})}},{key:"onFormSubmit",value:function(e){e.preventDefault();var t=this.state.teamsSelected.length;if(t<16){var a=16-t;this.setState({errors:"Il te manque "+a+" \xe9quipe(s)"})}else if(t>16){var n=t-16;this.setState({errors:"Tu as s\xe9lectionn\xe9 "+n+" \xe9quipe(s) en trop"})}else{var r={userID:localStorage.getItem("userID"),userPseudo:localStorage.getItem("userPseudo"),teams:this.state.teamsSelected};this.props.postVote(r),this.setState({isValid:"Votre vote est bien pris en compte"}),setTimeout(function(){window.location.replace("/classement")},1e3)}}},{key:"render",value:function(){var e=this;return r.a.createElement(B.a,null,r.a.createElement(B.a.Heading,null,r.a.createElement(B.a.Title,{componentClass:"h2"},r.a.createElement("img",{className:"nhl-logo",src:le.a,alt:"NHL Logo"})," Teams")),r.a.createElement(B.a.Body,null,r.a.createElement(ne.a,{onSubmit:this.onFormSubmit.bind(this)},this.props.teams.map(function(t,a){return r.a.createElement(M.a,{xs:12,md:4,lg:3,key:a},r.a.createElement(G.a,null,r.a.createElement("label",null,r.a.createElement("img",{className:"teams-logo",src:t.img,alt:t.name}),t.name,r.a.createElement(re.a,{className:"form-checkbox",id:t._id,name:t.name,onChange:e.onTeamChange.bind(e),value:t.name}))))}),r.a.createElement(M.a,{xs:12,className:"align-center"},r.a.createElement(J.a,{type:"submit"},"Submit"),""!==this.state.errors&&r.a.createElement("div",{className:"invalid-feedback"},this.state.errors)))),""!==this.state.isValid&&r.a.createElement("div",{className:"valid-feedback"},this.state.isValid))}}]),t}(n.Component),ce=Object(c.b)(function(e){return{teams:e.teams.teams}},function(e){return Object(F.b)({getTeams:Z,postVote:Q},e)})(se),ie=function(e){function t(e){var a;Object(i.a)(this,t),a=Object(m.a)(this,Object(d.a)(t).call(this,e));var n=localStorage.getItem("userID");return a.state={userID:n,isVoted:!1},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.props.getVote(this.state.userID)}},{key:"componentDidUpdate",value:function(e){e.userVote.length!==this.props.userVote.length&&this.setState({isVoted:!0})}},{key:"render",value:function(){return r.a.createElement(A.a,{id:"vote-form",fluid:!0},r.a.createElement(M.a,{xs:12},this.state.isVoted?this.props.userVote.map(function(e,t){return r.a.createElement(te,Object.assign({key:t},e))}):r.a.createElement(ce,null)))}}]),t}(n.Component),ue=Object(c.b)(function(e){return{userVote:e.vote.userVote}},function(e){return Object(F.b)({getVote:Y},e)})(ie),me=a(198),de=function(e){function t(e){var a;Object(i.a)(this,t);var n=(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).props.id;return a.state={userID:n,modifyUser:!1},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"modifyUser",value:function(){this.setState({modifyUser:!this.state.modifyUser})}},{key:"changeUser",value:function(){var e={nom:Object(o.findDOMNode)(this.refs.newNom).value,prenom:Object(o.findDOMNode)(this.refs.newPrenom).value,pseudo:Object(o.findDOMNode)(this.refs.newPseudo).value,email:Object(o.findDOMNode)(this.refs.newEmail).value};this.props.updateUser(this.state.userID,e),this.props.logoutUser()}},{key:"render",value:function(){return r.a.createElement(M.a,{xs:12,md:6,mdOffset:3},r.a.createElement(B.a,null,r.a.createElement(B.a.Heading,null,r.a.createElement(B.a.Title,{componentClass:"h2"},"Modifie tes informations de compte")),r.a.createElement(B.a.Body,null,this.state.modifyUser?r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(G.a,{controlId:"newNom"},r.a.createElement(me.a,null,"Change ton Nom :"),r.a.createElement(H.a,{type:"text",defaultValue:this.props.nom,ref:"newNom"}))),r.a.createElement("li",null,r.a.createElement(G.a,{controlId:"newPrenom"},r.a.createElement(me.a,null,"Change ton Pr\xe9nom :"),r.a.createElement(H.a,{type:"text",defaultValue:this.props.prenom,ref:"newPrenom"}))),r.a.createElement("li",null,r.a.createElement(G.a,{controlId:"newPseudo"},r.a.createElement(me.a,null,"Change ton pseudo :"),r.a.createElement(H.a,{type:"text",defaultValue:this.props.pseudo,ref:"newPseudo"}))),r.a.createElement("li",null,r.a.createElement(G.a,{controlId:"newEmail"},r.a.createElement(me.a,null,"Change ton email :"),r.a.createElement(H.a,{type:"text",defaultValue:this.props.email,ref:"newEmail"}))),r.a.createElement("li",null,r.a.createElement(J.a,{onClick:this.changeUser.bind(this)},"Sauvegarder"),r.a.createElement(J.a,{onClick:this.modifyUser.bind(this)},"Annuler")),r.a.createElement("li",null,r.a.createElement("p",null,"Attention tu seras d\xe9connect\xe9 automatiquement afin de faire la mise \xe0 jour. Il faudra te connecter \xe0 nouveau."))):r.a.createElement("ul",null,r.a.createElement("li",null,"nom : ",this.props.nom),r.a.createElement("li",null,"pr\xe9nom : ",this.props.prenom),r.a.createElement("li",null,"pseudo : ",this.props.pseudo),r.a.createElement("li",null,"email : ",this.props.email),r.a.createElement("li",null,r.a.createElement(J.a,{onClick:this.modifyUser.bind(this)},"Modifier"))))))}}]),t}(n.Component);var pe=Object(c.b)(null,function(e){return Object(F.b)({updateUser:k,logoutUser:N},e)})(de),he=function(e){function t(e){var a;Object(i.a)(this,t),a=Object(m.a)(this,Object(d.a)(t).call(this,e));var n=localStorage.getItem("userPseudo"),r=localStorage.getItem("userID");return a.state={userPseudo:n,userID:r,modifyName:!1},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this.state.userID;this.props.getUser({id:e}),this.props.getVote(e)}},{key:"render",value:function(){return r.a.createElement(A.a,{id:"mon-compte",className:"vertical-middle",fluid:!0},r.a.createElement(M.a,{xs:12},r.a.createElement("h1",{className:"align-center"},"Voici ton compte ",this.state.userPseudo),this.props.userData.map(function(e,t){return r.a.createElement(pe,Object.assign({key:t},e))})),r.a.createElement(M.a,{xs:12},this.props.userVote.map(function(e,t){return r.a.createElement(te,Object.assign({key:t},e))})))}}]),t}(n.Component);var fe=Object(c.b)(function(e){return{userData:e.auth.user,userVote:e.vote.userVote}},function(e){return Object(F.b)({getUser:T,getVote:Y},e)})(he),Ee=function(){return r.a.createElement("main",null,r.a.createElement(D.a,null,r.a.createElement(U.a,{exact:!0,path:"/",component:z}),r.a.createElement(U.a,{path:"/signin",component:$}),r.a.createElement(U.a,{path:"/vote",component:ue}),r.a.createElement(U.a,{path:"/monCompte",component:fe})))},ve=function(e){function t(){return Object(i.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("section",null,r.a.createElement(_,null),r.a.createElement(Ee,null))}}]),t}(n.Component),be=a(30),ge={teams:[],error:null},Oe={vote:[],userVote:[]},ye=function(e){return void 0===e||null===e||"object"===typeof e&&0===Object.keys(e).length||"string"===typeof e&&0===e.trim().length},je={isAuthenticated:!1,user:[]};var Ce={};var we=Object(F.c)({teams:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ge,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_TEAMS":return Object(be.a)({},e,{teams:Object(ae.a)(t.payload)});case"GET_TEAMS_REJECTED":return t.payload;default:return e}},vote:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"POST_VOTE":return Object(be.a)({},e,{vote:[].concat(Object(ae.a)(e.vote),[t.payload])});case"POST_VOTE_REJECTED":return t.payload;case"GET_VOTE":return Object(be.a)({},e,{userVote:Object(ae.a)(t.payload)});case"GET_VOTE_REJECTED":return t.payload;default:return e}},errors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return t.payload;default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y:return Object(be.a)({},e,{isAuthenticated:!ye(t.payload),user:[t.payload]});default:return e}}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ke=a(99),Se=a(100),Te=a(101),Ie=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||F.d,Ne=Object(F.e)(we,Ie(Object(F.a)(Object(Te.a)(),Se.a,Object(ke.createLogger)())));l.a.render(r.a.createElement(c.a,{store:Ne},r.a.createElement(s.a,null,r.a.createElement(ve,null))),document.getElementById("root"));t.default=Ne;"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},98:function(e,t,a){e.exports=a.p+"static/media/nhl.266661c7.svg"}},[[102,1,2]]]);
//# sourceMappingURL=main.50afcb0e.chunk.js.map